function loadNewChartModal(){return resetNewChartModal(),tb_show("Create a New Chart/Calculation","#TB_inline?width=500&amp;inlineId=gf_new_chart_modal"),jQuery("#new_chart_title").focus(),!1}function handleNewChartSubmission(){return saveNewChart(),!1}function saveNewChart(){var r=jQuery("#save_new_chart"),t=new gfAjaxSpinner(r,gfchart_admin_js.spinner);jQuery("#gf_new_chart_error_message").html("");var a=r.val();r.val("Creating Chart...");var e={title:jQuery("#new_chart_title").val(),source_form:jQuery("#new_chart_source_form").val()};jQuery.post(ajaxurl,{chart:jQuery.toJSON(e),action:"gf_save_new_chart",gf_save_new_chart:gfchart_admin_js.nonce},function(e){t.destroy(),!0===e.success?(location.href=e.data.redirect,r.val("Saved! Redirecting...")):(jQuery("#gf_new_chart_error_message").html(e.data),addInputErrorIcon("#new_chart_title"),r.val(a))})}function resetNewChartModal(){jQuery("#new_chart_title").val(""),jQuery("#gf_new_chart_error_message").html(""),removeInputErrorIcons(".gf_new_chart_modal_container")}function addInputErrorIcon(e){(e=jQuery(e)).before('<span class="gf_input_error_icon"></span>')}function removeInputErrorIcons(e){(e=jQuery(e)).find("span.gf_input_error_icon").remove()}function gfAjaxSpinner(e,r,t){r=void 0===r?"/images/ajax-loader.gif":r,t=void 0!==t?t:"";return this.elem=e,this.image='<img class="gfspinner" src="'+r+'" style="'+t+'" />',this.init=function(){return this.spinner=jQuery(this.image),jQuery(this.elem).after(this.spinner),this},this.destroy=function(){jQuery(this.spinner).remove()},this.init()}jQuery(document).ready(function(e){var r=e(".post-type-gfchart .page-title-action"),t=e("<button>").addClass("page-title-action").text(r.text()).on("click",loadNewChartModal);r.after(t),e(document).on("submit","#gf_new_chart_modal_form",handleNewChartSubmission)});